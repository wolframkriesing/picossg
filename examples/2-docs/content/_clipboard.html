<style>
  * :has(> [class$="-allow2copy"]) {
    position: relative;
  }

  [class$="-allow2copy"]::after {
    content: "[copy]";
    position: absolute;
    right: 0;
    top: 0;
    margin: 0.5em;
  }

  .copied > [class$="-allow2copy"]::after {
    content: "[copied]";
  }
</style>

<script>
  document.querySelectorAll('[class$="-allow2copy"]').forEach($el =>
    $el.addEventListener('click', ($el) => {
      const $node = $el.target;
      const content = $node.textContent;
      navigator.clipboard.writeText(content);
      $node.parentNode.classList.add('copied');
      setTimeout(($n => () => $n.classList.remove('copied'))($node.parentNode), 1000);
    })
  );
</script>

